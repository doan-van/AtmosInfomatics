
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Climate Indices in Python &#8212; climate_indices 1.0.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">climate_indices 1.0.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Climate Indices in Python</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<p><a class="reference external" href="https://github.com/monocongo/climate_indices/actions"><img alt="Build" src="https://github.com/monocongo/climate_indices/workflows/build/badge.svg" /></a> <a class="reference external" href="https://coveralls.io/github/monocongo/climate_indices?branch=master"><img alt="Coverage" src="https://coveralls.io/repos/github/monocongo/climate_indices/badge.svg?branch=master" /></a> <a class="reference external" href="https://www.codacy.com/app/monocongo/climate_indices?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=monocongo/climate_indices&amp;amp;utm_campaign=Badge_Grade"><img alt="Quality" src="https://api.codacy.com/project/badge/Grade/48563cbc37504fc6aa72100370e71f58" /></a> <a class="reference external" href="https://opensource.org/licenses/BSD-3-Clause"><img alt="License" src="https://img.shields.io/badge/license-BSD%203--Clause-green.svg" /></a> <img alt="Python" src="https://img.shields.io/pypi/pyversions/climate-indices" /></p>
<section id="climate-indices-in-python">
<h1>Climate Indices in Python<a class="headerlink" href="#climate-indices-in-python" title="Permalink to this headline">¶</a></h1>
<p>This project contains Python implementations of various climate index algorithms which provide
a geographical and temporal picture of the severity of precipitation and temperature anomalies
useful for climate monitoring and research.</p>
<p>The following indices are provided:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://climatedataguide.ucar.edu/climate-data/standardized-precipitation-index-spi">SPI</a>,
Standardized Precipitation Index, utilizing both gamma and Pearson Type III distributions</p></li>
<li><p><a class="reference external" href="https://www.researchgate.net/publication/252361460_The_Standardized_Precipitation-Evapotranspiration_Index_SPEI_a_multiscalar_drought_index">SPEI</a>,
Standardized Precipitation Evapotranspiration Index, utilizing both gamma and Pearson Type III distributions</p></li>
<li><p><a class="reference external" href="https://www.ncdc.noaa.gov/monitoring-references/dyk/potential-evapotranspiration">PET</a>,
Potential Evapotranspiration, utilizing either <a class="reference external" href="http://dx.doi.org/10.2307/21073">Thornthwaite</a>
or <a class="reference external" href="http://dx.doi.org/10.13031/2013.26773">Hargreaves</a> equations</p></li>
<li><p><a class="reference external" href="http://www.droughtmanagement.info/percent-of-normal-precipitation/">PNP</a>,
Percentage of Normal Precipitation</p></li>
</ul>
<p>The following are provided as experimental/development versions only, not fully vetted nor suitable for research purposes:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.droughtmanagement.info/palmer-drought-severity-index-pdsi/">PDSI</a>,
Palmer Drought Severity Index</p></li>
<li><p><a class="reference external" href="http://www.droughtmanagement.info/self-calibrated-palmer-drought-severity-index-sc-pdsi/">scPDSI</a>,
Self-calibrated Palmer Drought Severity Index</p></li>
<li><p><a class="reference external" href="http://www.droughtmanagement.info/palmer-hydrological-drought-index-phdi/">PHDI</a>,
Palmer Hydrological Drought Index</p></li>
<li><p><a class="reference external" href="http://www.droughtmanagement.info/palmer-z-index/">Z-Index</a>,
Palmer moisture anomaly index (Z-index)</p></li>
<li><p><a class="reference external" href="https://climate.ncsu.edu/climate/climdiv">PMDI</a>, Palmer Modified Drought Index</p></li>
</ul>
<p>This Python implementation of the above climate index algorithms is being developed
with the following goals in mind:</p>
<ul class="simple">
<li><p>to provide an open source software package to compute a suite of
climate indices commonly used for climate monitoring, with well
documented code that is faithful to the relevant literature and
which produces scientifically verifiable results</p></li>
<li><p>to provide a central, open location for participation and collaboration
for researchers, developers, and users of climate indices</p></li>
<li><p>to facilitate standardization and consensus on best-of-breed
climate index algorithms and corresponding compliant implementations in Python</p></li>
<li><p>to provide transparency into the operational code used for climate
monitoring activities at NCEI/NOAA, and consequent reproducibility
of published datasets computed from this package</p></li>
<li><p>to incorporate modern software engineering principles and scientific programming
best practices</p></li>
</ul>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The installation and configuration described below is
performed using a bash shell, either on Linux, Windows, or MacOS.</p>
<p>Windows users will need to install and configure a bash shell in order
to follow the usage shown below. We recommended either
<a class="reference external" href="https://babun.github.io/">babun</a> or <a class="reference external" href="https://www.cygwin.com/">Cygwin</a>
for this purpose.</p>
<section id="configure-the-python-environment">
<h3>Configure the Python environment<a class="headerlink" href="#configure-the-python-environment" title="Permalink to this headline">¶</a></h3>
<p>This project’s code is written in Python 3. It is recommended to use
either the <a class="reference external" href="https://conda.io/miniconda.html">Miniconda3</a> (minimal Anaconda) or
<a class="reference external" href="https://www.continuum.io/downloads">Anaconda3</a> distribution. The below instructions
will be Anaconda specific (although relevant to any Python <a class="reference external" href="https://virtualenv.pypa.io/en/stable/">virtual environment</a>
), and assume the use of a bash shell.</p>
<p>A new Anaconda <a class="reference external" href="https://conda.io/docs/using/envs.html">environment</a> can be created
using the <a class="reference external" href="https://conda.io/docs/">conda</a> environment management system that comes
packaged with Anaconda. In the following examples, we’ll use an environment named <em>indices_env</em>
(any environment name can be used instead of <em>indices_env</em>) which will be created and
populated with all required dependencies through the use of the provided <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file.</p>
<p>First, create the Python environment:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">indices_env</span></code></p>
<p>The environment can now be ‘activated’:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">source</span> <span class="pre">activate</span> <span class="pre">indices_env</span></code></p>
<p>Once the environment has been activated then subsequent Python commands will run
in this environment where the package dependencies for this project are present.</p>
<p>Now the package can be added to the environment along with all required modules
(dependencies) via <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a>:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">climate-indices</span></code></p>
<p>For development of the package itself it pays to install the dependencies via
the <cite>requirements.txt</cite> file:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p>
<p>When adding dependencies to the package they should be added to the <cite>pyproject.toml</cite>
file in the dependencies section, then we can rebuild the requirements.txt file using pip-tools:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">python</span> <span class="pre">-m</span> <span class="pre">piptools</span> <span class="pre">compile</span> <span class="pre">-o</span> <span class="pre">requirements.txt</span> <span class="pre">pyproject.toml</span></code></p>
</section>
</section>
<section id="indices-processing">
<h2>Indices Processing<a class="headerlink" href="#indices-processing" title="Permalink to this headline">¶</a></h2>
<p>The installation will provide an “entry point” script which interacts with the core
computational package to compute one or more climate indices. This script is
<code class="docutils literal notranslate"><span class="pre">process_climate_indices</span></code> and is used to compute indices corresponding to gridded
NetCDF datasets as well as US climate division NetCDF datasets.</p>
<p>This Python entry point script is written to be run via bash shell command, i.e.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">&lt;options&gt;</span></code></p>
<p>The options for the entry point script are described below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>index</p></td>
<td><p>Which of the climate indices to compute.
Valid values are ‘spi’, ‘spei’, ‘pnp’, ‘scaled’,
‘pet’, and ‘palmers’. ‘scaled’ indicates all
three scaled indices (SPI, SPEI, and PNP) and
‘palmers’ indicates all Palmer indices (PDSI,
PHDI, PMDI, SCPDSI, and Z-Index).</p></td>
</tr>
<tr class="row-odd"><td><p>periodicity</p></td>
<td><p>The periodicity of the input dataset files.
Valid values are ‘monthly’ and ‘daily’.</p>
<p><strong>NOTE</strong>: Only SPI and PNP support daily inputs.</p>
</td>
</tr>
<tr class="row-even"><td><p>netcdf_precip</p></td>
<td><p>Input NetCDF file containing a
precipitation dataset, required for all
indices except for PET. Requires the use of
<strong>var_name_precip</strong> in conjunction so as to
identify the NetCDF’s precipitation variable.</p></td>
</tr>
<tr class="row-odd"><td><p>var_name_precip</p></td>
<td><p>Name of the precipitation variable within
the input precipitation NetCDF.</p></td>
</tr>
<tr class="row-even"><td><p>netcdf_temp</p></td>
<td><p>Input NetCDF file containing a
temperature dataset, required for PET.
If specified in conjunction with an index
specification of SPEI or Palmers then PET
will be computed and written as a side
effect, since these indices require PET.
This option is mutually exclusive with
<strong>netcdf_pet/var_name_pet</strong>, as either
temperature or PET is required as an input
(but not both) when computing SPEI and/or
Palmers. Requires the use of
<strong>var_name_temp</strong> in conjunction so as to
identify the NetCDF’s temperature variable.</p></td>
</tr>
<tr class="row-odd"><td><p>var_name_temp</p></td>
<td><p>Name of the temperature variable within the
input temperature NetCDF.</p></td>
</tr>
<tr class="row-even"><td><p>netcdf_pet</p></td>
<td><p>Input NetCDF file containing a PET dataset,
required for SPEI and Palmers.
This option is mutually exclusive with
<strong>netcdf_temp/var_name_temp</strong>, as either
temperature or PET is required as an input
(but not both) when computing SPEI and/or
Palmers. Requires the use of
<strong>var_name_pet</strong> in conjunction so as to
identify the NetCDF’s PET variable.</p></td>
</tr>
<tr class="row-odd"><td><p>var_name_pet</p></td>
<td><p>Name of the PET variable within the input PET
NetCDF.</p></td>
</tr>
<tr class="row-even"><td><p>netcdf_awc</p></td>
<td><p>Input NetCDF file containing available water
capacity, required for Palmers. Requires the
use of <strong>var_name_awc</strong> in conjunction so as to
identify the NetCDF’s AWC variable.</p></td>
</tr>
<tr class="row-odd"><td><p>awc_var_name</p></td>
<td><p>Name of the available water capacity variable
within the input AWC NetCDF.</p></td>
</tr>
<tr class="row-even"><td><p>output_file_base</p></td>
<td><p>Base file name for all output files.</p>
<p>Each computed index will have a corresponding
output file whose name will begin with
this base name plus the index’s
abbreviation plus a month scale
(if applicable), connected with underscores,
plus the ‘.nc’ extension. For example
for SPI at 3-month scale
the resulting output files will be
named <strong>&lt;output_file_base&gt;_spi_gamma_03.nc</strong>
and <strong>&lt;output_file_base&gt;_spi_pearson_03.nc</strong>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>scales</p></td>
<td><p>Time step scales over which the PNP, SPI, and
SPEI values are to be computed. Required when
the <strong>index</strong> argument is ‘spi’, ‘spei’,
‘pnp’, or ‘scaled’. The <strong>periodicity</strong>
option will infer whether the scales used are
month or day scales.</p>
<p><strong>NOTE</strong>: When used for US climate divisions
processing this option specifies month scales</p>
</td>
</tr>
<tr class="row-even"><td><p>calibration_start_year</p></td>
<td><p>Initial year of the calibration period.</p></td>
</tr>
<tr class="row-odd"><td><p>calibration_end_year</p></td>
<td><p>Final year of the calibration period
(inclusive).</p></td>
</tr>
<tr class="row-even"><td><p>multiprocessing</p></td>
<td><p>Valid values are ‘all’ (uses all available
CPUs), ‘single’ (uses a single CPU), or
‘all_but_one’ (uses all CPUs minus one).
Default value is ‘all_but_one’.</p></td>
</tr>
<tr class="row-odd"><td><p>save_params</p></td>
<td><p>Save distribution fitting variables to this file
path. The fittings NetCDF is to be used as input
when using the <cite>load_params</cite> option. [NOTE:
only for use with the <cite>spi</cite> entrypoint for SPI.]</p></td>
</tr>
<tr class="row-even"><td><p>load_params</p></td>
<td><p>Load distribution fitting variables from this
filepath. The fittings NetCDF file is one that
was created by the <cite>save_params</cite> option. [NOTE:
only for use with the <cite>spi</cite> entrypoint for SPI.]</p></td>
</tr>
</tbody>
</table>
<section id="example-input-and-output-datasets">
<h3>Example Input and Output Datasets<a class="headerlink" href="#example-input-and-output-datasets" title="Permalink to this headline">¶</a></h3>
<p>Example NetCDF datasets that are valid input to the indices processing scripts
described above are available from the associated project
<a class="reference external" href="https://github.com/monocongo/example_climate_indices/">example_climate_indices</a>.
The input NetCDF files used in the examples below (<cite>nclimdiv.nc</cite>,
<cite>nclimgrid_lowres_prcp.nc</cite>, etc.) can be fetched from this repository, as well
as associated output NetCDF datasets that can be used to validate result of the
below examples.</p>
</section>
<section id="example-command-line-invocations">
<h3>Example Command Line Invocations<a class="headerlink" href="#example-command-line-invocations" title="Permalink to this headline">¶</a></h3>
<section id="us-climate-divisions-all-indices">
<h4>US Climate Divisions (all indices)<a class="headerlink" href="#us-climate-divisions-all-indices" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">all</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--scales</span> <span class="pre">3</span> <span class="pre">6</span>
<span class="pre">--netcdf_precip</span> <span class="pre">/data/nclimdiv.nc</span>
<span class="pre">--netcdf_temp</span> <span class="pre">/data/nclimdiv.nc</span>
<span class="pre">--netcdf_awc</span> <span class="pre">/data/nclimdiv.nc</span>
<span class="pre">--output_file_base</span> <span class="pre">/data/nclimdiv</span>
<span class="pre">--var_name_precip</span> <span class="pre">prcp</span> <span class="pre">--var_name_temp</span> <span class="pre">tavg</span> <span class="pre">--var_name_awc</span> <span class="pre">awc</span>
<span class="pre">--calibration_start_year</span> <span class="pre">1951</span> <span class="pre">--calibration_end_year</span> <span class="pre">2010</span></code></p>
<p>The above command will compute all indices from an input NetCDF dataset containing
precipitation, temperature, and available water capacity variables (in this case,
the US Climate Divisions NetCDF dataset provided in the example inputs directory).
The input dataset is monthly data and the calibration period used will be
Jan. 1951 through Dec. 2010. The indices will be computed at 3-month and 6-month scales.
Upon completion the individual NetCDF files will contain variables for all computed indices:
<cite>/data/nclimdiv_pet.nc</cite>, <cite>/data/nclimdiv_pnp_03.nc</cite>, <cite>/data/nclimdiv_pnp_06.nc</cite>,
<cite>/data/nclimdiv_spi_gamma_03.nc</cite>, <cite>/data/nclimdiv_spi_gamma_06.nc</cite>,
<cite>/data/nclimdiv_spi_pearson_03.nc</cite>, <cite>/data/nclimdiv_spi_pearson_06.nc</cite>,
<cite>/data/nclimdiv_spei_gamma_03.nc</cite>, <cite>/data/nclimdiv_spei_gamma_06.nc</cite>,
<cite>/data/nclimdiv_spei_pearson_03.nc</cite>, <cite>/data/nclimdiv_spei_pearson_06.nc</cite>,
<cite>/data/nclimdiv_pdsi.nc</cite>, <cite>/data/nclimdiv_phdi.nc</cite>, <cite>/data/nclimdiv_pmdi.nc</cite>,
<cite>/data/nclimdiv_scpdsi.nc</cite>, and <cite>/data/nclimdiv_zindex.nc</cite>.
Parallelization will occur utilizing all but one of the available CPUs
(default since the <cite>–multiprocessing</cite> option is omitted).</p>
</section>
<section id="pet-monthly">
<h4>PET monthly<a class="headerlink" href="#pet-monthly" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">pet</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--netcdf_temp</span>
<span class="pre">/data/nclimgrid_lowres_tavg.nc</span> <span class="pre">--var_name_temp</span> <span class="pre">tavg</span> <span class="pre">--output_file_base</span>
<span class="pre">&lt;out_dir&gt;/nclimgrid_lowres</span> <span class="pre">--multiprocessing</span> <span class="pre">all_but_one</span></code></p>
<p>The above command will compute PET (potential evapotranspiration) using the
Thornthwaite method from an input temperature dataset (in this case, the reduced
resolution nClimGrid temperature dataset provided in the example inputs directory).
The input dataset is monthly data and the calibration period used will be Jan. 1951
through Dec. 2010. The output file will be <cite>&lt;out_dir&gt;/nclimgrid_lowres_pet.nc</cite>.
Parallelization will occur utilizing all but one of the available CPUs.</p>
</section>
<section id="spi-daily">
<h4>SPI daily<a class="headerlink" href="#spi-daily" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">spi</span>&#160; <span class="pre">--periodicity</span> <span class="pre">daily</span> <span class="pre">--netcdf_precip</span>
<span class="pre">/data/cmorph_lowres_daily_conus_prcp.nc</span> <span class="pre">--var_name_precip</span>
<span class="pre">prcp</span> <span class="pre">--output_file_base</span> <span class="pre">&lt;out_dir&gt;/cmorph_lowres_daily_conus</span> <span class="pre">--scales</span> <span class="pre">30</span> <span class="pre">90</span>
<span class="pre">--calibration_start_year</span> <span class="pre">1998</span> <span class="pre">--calibration_end_year</span> <span class="pre">2016</span>
<span class="pre">--multiprocessing</span> <span class="pre">all</span></code></p>
<p>The above command will compute SPI (standardized precipitation index, both gamma
and Pearson Type III distributions) from an input precipitation dataset (in this case,
the reduced resolution CMORPH precipitation dataset provided in the example inputs
directory). The input dataset is daily data and the calibration period used will be
Jan. 1st, 1998 through Dec. 31st, 2016. The index will be computed at 30-day and
90-day timescales. The output files will be <cite>&lt;out_dir&gt;/cmorph_lowres_daily_conus_spi_gamma_30.nc</cite>,
<cite>&lt;out_dir&gt;/cmorph_lowres_daily_conus_spi_gamma_90.nc</cite>,
<cite>&lt;out_dir&gt;/cmorph_lowres_daily_conus_spi_pearson_30.nc</cite>, and
<cite>&lt;out_dir&gt;/cmorph_lowres_daily_conus_spi_pearson_90.nc</cite>. Parallelization will occur utilizing
all CPUs.</p>
</section>
<section id="spi-monthly">
<h4>SPI monthly<a class="headerlink" href="#spi-monthly" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">spi</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--netcdf_precip</span>
<span class="pre">/data/nclimgrid_lowres_prcp.nc</span> <span class="pre">--var_name_precip</span> <span class="pre">prcp</span>
<span class="pre">--output_file_base</span> <span class="pre">&lt;out_dir&gt;/nclimgrid_lowres</span> <span class="pre">--scales</span> <span class="pre">6</span> <span class="pre">12</span>
<span class="pre">--calibration_start_year</span> <span class="pre">1951</span> <span class="pre">--calibration_end_year</span> <span class="pre">2010</span>
<span class="pre">--multiprocessing</span> <span class="pre">all</span></code></p>
<p>The above command will compute SPI (standardized precipitation index, both gamma and
Pearson Type III distributions) from an input precipitation dataset (in this case,
the reduced resolution nClimGrid precipitation dataset provided in the example inputs directory).
The input dataset is monthly data and the calibration period used will be
Jan. 1951 through Dec. 2010. The index will be computed at 6-month and 12-month timescales.
The output files will be <cite>&lt;out_dir&gt;/nclimgrid_lowres_spi_gamma_06.nc</cite>,
<cite>&lt;out_dir&gt;/nclimgrid_lowres_spi_gamma_12.nc</cite>, <cite>&lt;out_dir&gt;/nclimgrid_lowres_spi_pearson_06.nc</cite>,
and <cite>&lt;out_dir&gt;/nclimgrid_lowres_spi_pearson_12.nc</cite>. Parallelization will occur utilizing
all CPUs.</p>
</section>
<section id="spei-monthly">
<h4>SPEI monthly<a class="headerlink" href="#spei-monthly" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">spei</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--netcdf_precip</span>
<span class="pre">/data/nclimgrid_lowres_prcp.nc</span> <span class="pre">--var_name_precip</span> <span class="pre">prcp</span> <span class="pre">--netcdf_pet</span>
<span class="pre">/data/nclimgrid_lowres_pet.nc</span> <span class="pre">--var_name_pet</span> <span class="pre">pet</span> <span class="pre">--output_file_base</span>
<span class="pre">&lt;out_dir&gt;/nclimgrid_lowres</span> <span class="pre">--scales</span> <span class="pre">9</span> <span class="pre">18</span> <span class="pre">--calibration_start_year</span> <span class="pre">1951</span>
<span class="pre">--calibration_end_year</span> <span class="pre">2010</span> <span class="pre">--multiprocessing</span> <span class="pre">all</span></code></p>
<p>The above command will compute SPEI (standardized precipitation evapotranspiration index,
both gamma and Pearson Type III distributions) from input precipitation and potential evapotranspiration datasets
(in this case, the reduced resolution nClimGrid precipitation and PET datasets provided in the example inputs directory).
The input datasets are monthly data and the calibration period used will be Jan. 1951 through Dec. 2010. The index
datasets will be computed at 9-month and 18-month timescales. The output files will be
<cite>&lt;out_dir&gt;/nclimgrid_lowres_spei_gamma_09.nc</cite>, <cite>&lt;out_dir&gt;/nclimgrid_lowres_spei_gamma_18.nc</cite>,
<cite>&lt;out_dir&gt;/nclimgrid_lowres_spei_pearson_09.nc</cite>, and <cite>&lt;out_dir&gt;/nclimgrid_lowres_spei_pearson_18.nc</cite>.
Parallelization will occur utilizing all CPUs.</p>
</section>
<section id="palmers-monthly">
<h4>Palmers monthly<a class="headerlink" href="#palmers-monthly" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">process_climate_indices</span> <span class="pre">--index</span> <span class="pre">palmers</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--netcdf_precip</span>
<span class="pre">/data/nclimgrid_lowres_prcp.nc</span> <span class="pre">--var_name_precip</span> <span class="pre">prcp</span> <span class="pre">--netcdf_pet</span>
<span class="pre">/data/nclimgrid_lowres_pet.nc</span> <span class="pre">--var_name_pet</span> <span class="pre">pet</span> <span class="pre">--netcdf_awc</span>
<span class="pre">/data/nclimgrid_lowres_soil.nc</span>&#160; <span class="pre">--var_name_awc</span> <span class="pre">awc</span> <span class="pre">--output_file_base</span>
<span class="pre">&lt;out_dir&gt;/nclimgrid_lowres</span> <span class="pre">--calibration_start_year</span> <span class="pre">1951</span> <span class="pre">--calibration_end_year</span> <span class="pre">2010</span>
<span class="pre">--multiprocessing</span> <span class="pre">all</span></code></p>
<p>The above command will compute the Palmer drought indices: PDSI (original Palmer Drought Severity Index),
PHDI (Palmer Hydrological Drought Index), PMDI (Palmer Modified Drought Index), Z-Index (Palmer Z-Index),
and SCPDSI (Self-calibrated Palmer Drought Severity Index) from input precipitation, potential
evapotranspiration, and available water capacity datasets (in this case, the reduced resolution nClimGrid
precipitation, PET, and AWC datasets provided in the example inputs directory). The input datasets are monthly
data and the calibration period used will be Jan. 1951 through Dec. 2010. The output files will be
<cite>&lt;out_dir&gt;/nclimgrid_lowres_pdsi.nc</cite>, <cite>&lt;out_dir&gt;/nclimgrid_lowres_phdi.nc</cite>,
<cite>&lt;out_dir&gt;/nclimgrid_lowres_pmdi.nc</cite>, <cite>&lt;out_dir&gt;/nclimgrid_lowres_scpdsi.nc</cite>, and <cite>&lt;out_dir&gt;/nclimgrid_lowres_zindex.nc</cite>.
Parallelization will occur utilizing all CPUs.</p>
</section>
<section id="pre-compute-spi-distribution-fitting-variables">
<h4>Pre-compute SPI distribution fitting variables<a class="headerlink" href="#pre-compute-spi-distribution-fitting-variables" title="Permalink to this headline">¶</a></h4>
<p>In order to pre-compute fititng parameters for later use as inputs to subsequent
SPI calculations we can save both gamma and Pearson distributinon fitting parameters
to NetCDF, and later use this file as input for SPI calculations over the same
calibration period.</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">spi</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--scales</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3</span> <span class="pre">6</span> <span class="pre">9</span> <span class="pre">12</span> <span class="pre">24</span> <span class="pre">36</span> <span class="pre">48</span> <span class="pre">60</span> <span class="pre">72</span>
<span class="pre">--calibration_start_year</span> <span class="pre">1998</span> <span class="pre">--calibration_end_year</span> <span class="pre">2016</span>
<span class="pre">--netcdf_precip</span> <span class="pre">/data/nclimgrid/nclimgrid_prcp.nc</span> <span class="pre">--var_name_precip</span> <span class="pre">prcp</span>
<span class="pre">--output_file_base</span> <span class="pre">/data/nclimgrid/nclimgrid</span> <span class="pre">--multiprocessing</span> <span class="pre">all</span>
<span class="pre">--save_params</span> <span class="pre">/data/nclimgrid/nclimgrid_fitting.nc</span> <span class="pre">--overwrite</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">spi</span> <span class="pre">--periodicity</span> <span class="pre">monthly</span> <span class="pre">--scales</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3</span> <span class="pre">6</span> <span class="pre">9</span> <span class="pre">12</span> <span class="pre">24</span> <span class="pre">36</span> <span class="pre">48</span> <span class="pre">60</span> <span class="pre">72</span>
<span class="pre">--calibration_start_year</span> <span class="pre">1998</span> <span class="pre">--calibration_end_year</span> <span class="pre">2016</span>
<span class="pre">--netcdf_precip</span> <span class="pre">/data/nclimgrid/nclimgrid_prcp.nc</span> <span class="pre">--var_name_precip</span> <span class="pre">prcp</span>
<span class="pre">--output_file_base</span> <span class="pre">/data/nclimgrid/nclimgrid</span> <span class="pre">--multiprocessing</span> <span class="pre">all</span>
<span class="pre">--load_params</span> <span class="pre">/data/nclimgrid/nclimgrid_fitting.nc</span></code></p>
<p>In the above example we demonstrate how distribution fitting parameters can be saved as NetCDF.
This fittings NetCDF can then be used as pre-computed variables in subsequent SPI computations.
Inital command computes both distribution fitting values and SPI for various month scales.
The distribution fitting variables are written to the file specified by the <cite>–save_params</cite> option.
The second command also computes SPI but instead of computing the distribution fitting values
it loads the pre-computed fitting values from the NetCDF file specified by the <cite>–load_params</cite>
option.</p>
</section>
</section>
</section>
<section id="for-developers">
<h2>For Developers<a class="headerlink" href="#for-developers" title="Permalink to this headline">¶</a></h2>
<section id="download-the-code">
<h3>Download the code<a class="headerlink" href="#download-the-code" title="Permalink to this headline">¶</a></h3>
<p>Clone this repository:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/monocongo/climate_indices.git</span></code></p>
<p>Move into the source directory:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">cd</span> <span class="pre">climate_indices</span></code></p>
<p>Within this directory, there are four subdirectories:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">climate_indices</span></code>: main computational package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests</span></code>: unit tests for the main package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">notebooks</span></code>: Jupyter Notebooks describing the internals of the computational modules</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs</span></code>: documentation files</p></li>
</ul>
</section>
<section id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Initially, all tests should be run for validation:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">tox</span></code></p>
<p>If you run the above from the main branch and get an error then please
send a report and/or add an issue, as all tests should pass.</p>
</section>
</section>
<section id="get-involved">
<h2>Get involved<a class="headerlink" href="#get-involved" title="Permalink to this headline">¶</a></h2>
<p>Please use, make suggestions, and contribute to this code. Without
diverse participation and community adoption this project will not reach
its potential.</p>
<p>Are you aware of other indices that would be a good addition here? Can
you identify bottlenecks and help optimize performance? Can you suggest new
ways of comparing these implementations against others (or other
criteria) in order to determine best-of-breed? Please fork the code and
have at it, and/or contact us to see if we can help.</p>
<ul class="simple">
<li><p>Read our <a class="reference external" href="https://github.com/monocongo/climate_indices/blob/master/CONTRIBUTING.md">contributing
guidelines</a></p></li>
<li><p>File an
<a class="reference external" href="https://github.com/monocongo/climate_indices/issues">issue</a>, or
submit a <a class="reference external" href="https://github.com/monocongo/climate_indices/pulls">pull request</a></p></li>
<li><p>Send us an <a class="reference external" href="mailto:monocongo&#37;&#52;&#48;gmail&#46;com">email</a></p></li>
</ul>
</section>
<section id="copyright-and-licensing">
<h2>Copyright and licensing<a class="headerlink" href="#copyright-and-licensing" title="Permalink to this headline">¶</a></h2>
<p>This is a developmental version of code that is originally developed at
NCEI/NOAA, official release version available on
<a class="reference external" href="https://www.drought.gov/drought/python-climate-indices">drought.gov</a>.
This software is under BSD 3-Clause license, copyright James Adams, 2017.
Please read more on our <a class="reference external" href="LICENSE">license</a> page.</p>
</section>
<section id="citation">
<h2>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h2>
<p>You can cite <cite>climate_indices</cite> in your projects and research papers via the BibTeX
entry below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@misc</span> <span class="p">{</span><span class="n">climate_indices</span><span class="p">,</span>
     <span class="n">author</span> <span class="o">=</span> <span class="s2">&quot;James Adams&quot;</span><span class="p">,</span>
     <span class="n">title</span>  <span class="o">=</span> <span class="s2">&quot;climate_indices, an open source Python library providing reference implementations of commonly used climate indices&quot;</span><span class="p">,</span>
     <span class="n">url</span>    <span class="o">=</span> <span class="s2">&quot;https://github.com/monocongo/climate_indices&quot;</span><span class="p">,</span>
     <span class="n">month</span>  <span class="o">=</span> <span class="s2">&quot;may&quot;</span><span class="p">,</span>
     <span class="n">year</span>   <span class="o">=</span> <span class="s2">&quot;2017--&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Climate Indices in Python</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li><a class="reference internal" href="#configure-the-python-environment">Configure the Python environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-processing">Indices Processing</a><ul>
<li><a class="reference internal" href="#example-input-and-output-datasets">Example Input and Output Datasets</a></li>
<li><a class="reference internal" href="#example-command-line-invocations">Example Command Line Invocations</a><ul>
<li><a class="reference internal" href="#us-climate-divisions-all-indices">US Climate Divisions (all indices)</a></li>
<li><a class="reference internal" href="#pet-monthly">PET monthly</a></li>
<li><a class="reference internal" href="#spi-daily">SPI daily</a></li>
<li><a class="reference internal" href="#spi-monthly">SPI monthly</a></li>
<li><a class="reference internal" href="#spei-monthly">SPEI monthly</a></li>
<li><a class="reference internal" href="#palmers-monthly">Palmers monthly</a></li>
<li><a class="reference internal" href="#pre-compute-spi-distribution-fitting-variables">Pre-compute SPI distribution fitting variables</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#for-developers">For Developers</a><ul>
<li><a class="reference internal" href="#download-the-code">Download the code</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#get-involved">Get involved</a></li>
<li><a class="reference internal" href="#copyright-and-licensing">Copyright and licensing</a></li>
<li><a class="reference internal" href="#citation">Citation</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">climate_indices 1.0.10 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Climate Indices in Python</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>